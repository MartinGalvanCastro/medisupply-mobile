# Internationalization (i18n)

This project uses **i18next** and **react-i18next** for internationalization, providing multi-language support with automatic device locale detection.

## Features

- ✅ **Multi-language support** - English and Spanish included
- ✅ **Device locale detection** - Automatically uses device language
- ✅ **Type-safe translations** - TypeScript support
- ✅ **Organized structure** - Translations grouped by feature
- ✅ **Easy to extend** - Add new languages easily
- ✅ **Interpolation** - Dynamic values in translations
- ✅ **Custom hooks** - useTranslation, useLanguage

## Installation

Dependencies are already installed:

```json
{
  "i18next": "^23.15.0",
  "react-i18next": "^15.0.0",
  "expo-localization": "~16.0.0"
}
```

## Project Structure

```
src/i18n/
├── config.ts              # i18n configuration
├── index.ts               # Barrel export
├── hooks/                 # Custom i18n hooks
│   ├── useTranslation.ts
│   ├── useLanguage.ts
│   └── index.ts
└── locales/              # Translation files
    ├── en.ts             # English translations
    ├── es.ts             # Spanish translations
    └── index.ts
```

## Usage

### Basic Translation

```typescript
import { useTranslation } from '@/i18n';

function MyComponent() {
  const { t } = useTranslation();

  return <Text>{t('common.welcome')}</Text>;
  // Output: "Welcome" (en) or "Bienvenido" (es)
}
```

### With Interpolation

```typescript
const { t } = useTranslation();

<Text>{t('validation.minLength', { min: 8 })}</Text>
// Output: "Minimum length is 8 characters"
```

### Changing Language

```typescript
import { useLanguage } from '@/i18n';

function LanguageSwitcher() {
  const { currentLanguage, changeLanguage, availableLanguages } = useLanguage();

  return (
    <VStack>
      {availableLanguages.map((lang) => (
        <Button
          key={lang.code}
          onPress={() => changeLanguage(lang.code)}
          variant={currentLanguage === lang.code ? 'solid' : 'outline'}
        >
          <ButtonText>{lang.nativeName}</ButtonText>
        </Button>
      ))}
    </VStack>
  );
}
```

## Translation Files

### English (`src/i18n/locales/en.ts`)

```typescript
export default {
  common: {
    welcome: 'Welcome',
    loading: 'Loading...',
    error: 'Error',
    // ...
  },
  home: {
    title: 'Welcome to MediSupply',
    subtitle: 'Your medical supply management solution',
    // ...
  },
  products: {
    title: 'Products',
    searchPlaceholder: 'Search products...',
    // ...
  },
  // ...
} as const;
```

### Spanish (`src/i18n/locales/es.ts`)

```typescript
export default {
  common: {
    welcome: 'Bienvenido',
    loading: 'Cargando...',
    error: 'Error',
    // ...
  },
  home: {
    title: 'Bienvenido a MediSupply',
    subtitle: 'Tu solución de gestión de suministros médicos',
    // ...
  },
  products: {
    title: 'Productos',
    searchPlaceholder: 'Buscar productos...',
    // ...
  },
  // ...
} as const;
```

## Available Translation Keys

### Common

```typescript
t('common.welcome')      // Welcome / Bienvenido
t('common.loading')      // Loading... / Cargando...
t('common.error')        // Error / Error
t('common.success')      // Success / Éxito
t('common.cancel')       // Cancel / Cancelar
t('common.confirm')      // Confirm / Confirmar
t('common.save')         // Save / Guardar
t('common.delete')       // Delete / Eliminar
t('common.edit')         // Edit / Editar
t('common.create')       // Create / Crear
t('common.search')       // Search / Buscar
```

### Home Screen

```typescript
t('home.title')                // Welcome to MediSupply
t('home.subtitle')             // Your medical supply management solution
t('home.quickActions')         // Quick Actions
t('home.features')             // Features
t('home.viewProducts')         // View Products
t('home.manageInventory')      // Manage Inventory
t('home.viewOrders')           // View Orders
t('home.productManagement')    // Product Management
t('home.warehouseInventory')   // Warehouse Inventory
t('home.orderProcessing')      // Order Processing
t('home.sellerManagement')     // Seller Management
```

### Products

```typescript
t('products.title')              // Products
t('products.searchPlaceholder')  // Search products...
t('products.noProductsFound')    // No products found
t('products.productDetails')     // Product Details
t('products.description')        // Description
t('products.details')            // Details
t('products.price')              // Price
t('products.stock')              // Stock
t('products.units')              // units
t('products.provider')           // Provider
t('products.sku')                // SKU
t('products.addToOrder')         // Add to Order
t('products.viewInventory')      // View Inventory
```

### Validation

```typescript
t('validation.required')                         // This field is required
t('validation.email')                            // Invalid email address
t('validation.minLength', { min: 8 })           // Minimum length is 8 characters
t('validation.maxLength', { max: 100 })         // Maximum length is 100 characters
t('validation.number')                           // Must be a number
t('validation.positive')                         // Must be a positive number
```

### Errors

```typescript
t('errors.somethingWentWrong')  // Something went wrong
t('errors.networkError')        // Network error. Please check your connection.
t('errors.notFound')            // Not found
t('errors.unauthorized')        // Unauthorized
t('errors.serverError')         // Server error. Please try again later.
```

## Adding a New Language

### 1. Create Translation File

Create `src/i18n/locales/fr.ts`:

```typescript
export default {
  common: {
    welcome: 'Bienvenue',
    loading: 'Chargement...',
    // ... translate all keys
  },
  home: {
    title: 'Bienvenue sur MediSupply',
    // ... translate all keys
  },
  // ... translate all sections
} as const;
```

### 2. Update Config

Edit `src/i18n/config.ts`:

```typescript
import fr from './locales/fr';

export const LANGUAGES = {
  en: { name: 'English', nativeName: 'English' },
  es: { name: 'Spanish', nativeName: 'Español' },
  fr: { name: 'French', nativeName: 'Français' }, // Add this
} as const;

i18n.use(initReactI18next).init({
  resources: {
    en: { translation: en },
    es: { translation: es },
    fr: { translation: fr }, // Add this
  },
  // ...
});
```

### 3. Export Translation

Edit `src/i18n/locales/index.ts`:

```typescript
export { default as en } from './en';
export { default as es } from './es';
export { default as fr } from './fr'; // Add this
```

## Custom Hooks

### useTranslation

```typescript
const { t, i18n, language, changeLanguage } = useTranslation();

// t - translation function
// i18n - i18n instance
// language - current language code
// changeLanguage - function to change language
```

### useLanguage

```typescript
const {
  currentLanguage,    // Current language code
  changeLanguage,     // Change language function
  availableLanguages, // Array of available languages
  languages,          // Languages object
} = useLanguage();
```

## Provider Setup

The `I18nProvider` is already configured in `app/_layout.tsx`:

```typescript
import { I18nProvider } from '@/providers';

export default function RootLayout() {
  return (
    <I18nProvider>
      {/* App content */}
    </I18nProvider>
  );
}
```

## Examples

### Language Switcher Component

```typescript
import { useLanguage } from '@/i18n';
import { VStack, Button, ButtonText } from '@gluestack-ui/themed';

export function LanguageSwitcher() {
  const { currentLanguage, changeLanguage, availableLanguages } = useLanguage();

  return (
    <VStack space="md">
      {availableLanguages.map((lang) => (
        <Button
          key={lang.code}
          onPress={() => changeLanguage(lang.code)}
          variant={currentLanguage === lang.code ? 'solid' : 'outline'}
        >
          <ButtonText>
            {lang.nativeName} ({lang.name})
          </ButtonText>
        </Button>
      ))}
    </VStack>
  );
}
```

### Form with Validation

```typescript
import { useTranslation } from '@/i18n';

function LoginForm() {
  const { t } = useTranslation();
  const [email, setEmail] = useState('');
  const [error, setError] = useState('');

  const validate = () => {
    if (!email) {
      setError(t('validation.required'));
      return false;
    }
    if (!email.includes('@')) {
      setError(t('validation.email'));
      return false;
    }
    return true;
  };

  return (
    <VStack space="md">
      <Input isInvalid={!!error}>
        <InputField
          placeholder={t('common.email')}
          value={email}
          onChangeText={setEmail}
        />
      </Input>
      {error && <Text color="$error500">{error}</Text>}
      <Button onPress={() => validate() && handleSubmit()}>
        <ButtonText>{t('common.submit')}</ButtonText>
      </Button>
    </VStack>
  );
}
```

### Error Handling

```typescript
import { useTranslation } from '@/i18n';

function ProductList() {
  const { t } = useTranslation();
  const { data, error, isLoading } = useGetProducts();

  if (isLoading) {
    return <Text>{t('common.loading')}</Text>;
  }

  if (error) {
    if (error.response?.status === 404) {
      return <Text>{t('errors.notFound')}</Text>;
    }
    if (error.response?.status === 401) {
      return <Text>{t('errors.unauthorized')}</Text>;
    }
    return <Text>{t('errors.somethingWentWrong')}</Text>;
  }

  return <FlatList data={data} />;
}
```

## Configuration

### Device Locale Detection

The app automatically detects the device locale:

```typescript
import * as Localization from 'expo-localization';

const deviceLocale = Localization.getLocales()[0]?.languageCode || 'en';
```

### Fallback Language

If a translation key doesn't exist in the current language, it falls back to English:

```typescript
i18n.init({
  fallbackLng: 'en',
  // ...
});
```

## Best Practices

### 1. Organize by Feature

Group translations by feature/screen:

```typescript
{
  home: { /* home screen */ },
  products: { /* products screen */ },
  orders: { /* orders screen */ },
}
```

### 2. Use Descriptive Keys

```typescript
// ✅ Good
t('products.searchPlaceholder')
t('validation.required')

// ❌ Bad
t('search')
t('req')
```

### 3. Keep Translations in Sync

When adding a new key to one language, add it to all languages:

```typescript
// en.ts
export default {
  newFeature: {
    title: 'New Feature',
  },
};

// es.ts
export default {
  newFeature: {
    title: 'Nueva Característica',
  },
};
```

### 4. Use Interpolation for Dynamic Content

```typescript
// ✅ Good
t('validation.minLength', { min: 8 })

// ❌ Bad
`Minimum length is ${min} characters`
```

### 5. Test All Languages

Switch languages in the app and test all screens to ensure translations work correctly.

## Supported Languages

| Language | Code | Status |
|----------|------|--------|
| English | `en` | ✅ Complete |
| Spanish | `es` | ✅ Complete |

## Adding Translation Keys

1. Add key to all language files (`en.ts`, `es.ts`)
2. Use the key in your component with `t()`
3. Test in both languages

## Resources

- [i18next Documentation](https://www.i18next.com/)
- [react-i18next Documentation](https://react.i18next.com/)
- [Expo Localization](https://docs.expo.dev/versions/latest/sdk/localization/)

## Migration from Hardcoded Strings

**Before:**
```typescript
<Text>Welcome to MediSupply</Text>
```

**After:**
```typescript
const { t } = useTranslation();
<Text>{t('home.title')}</Text>
```

## Summary

- ✅ i18n setup complete with English and Spanish
- ✅ Device locale detection enabled
- ✅ Custom hooks for easy usage
- ✅ Organized translation structure
- ✅ Type-safe translations
- ✅ Easy to add new languages
- ✅ Production-ready configuration
